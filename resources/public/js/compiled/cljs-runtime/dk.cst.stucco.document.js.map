{"version":3,"sources":["dk/cst/stucco/document.cljs"],"mappings":";AAUA;;;oCAAA,4CAAAA,hFAAOI;AAAP,AAAA,IAAAH,aAAAD;IAAAC,iBAAA,AAAAC,4BAAAD;WAAAA,PAEwBM;UAFxB,AAAAJ,4CAAAF,eAAA,jEAEWI;UAFX,AAAAF,4CAAAF,eAAA,jEAEeK;AAFf,AAGE,oBAAQA;AAAR;;AAAA,AAAA,MAAA,KAAAE,MAAA,CAAA,uJAAA,KAAA,1IACQ,kDAAA,LAAKH,wEAA2BE;;;AAG1C;;;sCAAA,8CAAAE,pFAAME;AAAN,AAAA,IAAAD,aAAAD;IAAAC,iBAAA,AAAAR,4BAAAQ;WAAAA,PAEwBH;UAFxB,AAAAJ,4CAAAO,eAAA,jEAEWL;UAFX,AAAAF,4CAAAO,eAAA,jEAEeJ;AAFf,AAGE,AAACF,kCAAWG;;AACZ,IAAAK,gBAAA,AAAAC,8BAAA;AAAA,AAAA,IAAAC,2BAAAC;AAAA,AAAA,GAAA,CAAAD,4BAAA;AAAA;AAAA,IAAAE,yBAAAF;AAAA,AAAA,GAAA,CAAA,AAAAF,6BAAA,AAAAI;AAAA,AAAA,GAAAC;AAAA,AAAA,AAAA,EAAAC,wBAAAC,4BAAAC,eAAA,CAAA,iDAAA;;AAAA;;AAAA;;AAAA,CAAA,AAAAR,2BAAA,AAAAI;;;AAAA,IAAAK,YAAA,CAAA,AAAAT,yBAAA;iBAAA,EAAA,EAAAS,eAAA,AAAAC,cAAA,AAAAV,6BAAA,SAAA,CAAAA,cAAA,+DAAA,CAAAA,cAAA,jLAAaY,0GAAW,gDAAA,hDAACC;IAAzBF,WAAA,AACE,qCAAA,AAAAG,pBAAMC,oCAAaH;aAAnB,TACMI;AADN,AACmB,OAACC,mDAAML,WAAWF;;IAC/BQ,aAAY,4GAAA,2CAAA,vJAACC,uGAAMxB,6GAAgBqB;AAFzC,AAAA,0FAAA,kUAAA,mFAAA,yGAAA,mFAAA,pgBAGqB,qCAAA,AAAA,2CAAA,wDAAA,2BAAA,4EAAA,7NAAMD,8MAEOC,uVAEzBE,mBACN,qCAAA,AAAA,mFAAA,sEAAA,5KAAMH,yJACEG;;AAVb,AAAAP","names":["p__45018","map__45020","cljs.core/--destructure-map","cljs.core.get","dk.cst.stucco.document/assert-alt","src","alt","attr","js/Error","p__45023","map__45024","dk.cst.stucco.document/illustration","with-let45025","reagent.ratom/with-let-values","temp__5808__auto__","reagent.ratom/*ratom-context*","c__36614__auto__","reagent.debug/has-console","reagent.debug/tracking","reagent.debug/track-console","js/console","init45026","cljs.core/not","res45027","fullscreen","reagent.core.atom","cljs.core/deref","fullscreen?","toggle","cljs.core.swap_BANG_","attr*","cljs.core.merge"],"sourcesContent":["(ns dk.cst.stucco.document\n  \"Simple reagent components meant to replace common HTML elements, providing\n  useful interactive benefits and some validation.\n\n  Unlike the more complex components located in e.g. 'dk.cst.stucco.pattern',\n  the document components do not take any injected state. Rather, as they are\n  meant to replace common HTML elements, they take an HTML `attr` map and (when\n  applicable) contained HTML `content` as input args.\"\n  (:require [reagent.core :as r]))\n\n(defn- assert-alt\n  \"Assert from the `attr` that the image has an alt text.\"\n  [{:keys [src alt] :as attr}]\n  (assert alt\n          (str src \" lacks an alt text: \" attr)))\n\n;; TODO: aria tags, keyboard access\n(defn illustration\n  \"Illustration that can be full-screened if need be. Replaces [:img].\"\n  [{:keys [src alt] :as attr}]\n  (assert-alt attr)\n  (r/with-let [fullscreen (r/atom false)]\n    (let [fullscreen? @fullscreen\n          toggle      #(swap! fullscreen not)\n          attr*       (merge attr {:on-click toggle})]\n      [:div.illustration (when fullscreen?\n                           {:class    \"illustration--fullscreen\"\n                            :on-click toggle})\n       [:div.illustration__backdrop]\n       [:img attr*]\n       (when fullscreen?\n         [:img attr*])])))\n"]}